document.addEventListener("DOMContentLoaded",()=>{const e=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);if(!e)return void(document.body.innerHTML="<h1>Эта игра доступна только на мобильных устройствах.</h1>");document.addEventListener("contextmenu",e=>e.preventDefault()),document.addEventListener("keydown",e=>{"F12"===e.key||e.ctrlKey&&e.shiftKey&&"I"===e.key&&e.preventDefault()});let t;const n=indexedDB.open("clickerGame",1);n.onerror=e=>{console.error("Ошибка при открытии IndexedDB",e)},n.onsuccess=e=>{t=e.target.result,o()},n.onupgradeneeded=e=>{t=e.target.result;const n=t.createObjectStore("balance",{keyPath:"id"});n.transaction.oncomplete=()=>{t.transaction("balance","readwrite").objectStore("balance").add({id:"currentBalance",value:1,lastUpdate:Date.now(),isMining:!1})}};function o(){const e=t.transaction(["balance"],"readonly").objectStore("balance").get("currentBalance");e.onsuccess=e=>{if(e.target.result){const t=e.target.result;document.getElementById("balance-value").textContent=t.value,document.getElementById("balance-container").classList.add("active")}},e.onerror=e=>{console.error("Ошибка при загрузке баланса",e)}}function a(e){const n=t.transaction(["balance"],"readwrite").objectStore("balance").get("currentBalance");n.onsuccess=t=>{const o=t.target.result;o.value=parseInt(o.value)+e,n.objectStore.put(o),document.getElementById("balance-value").textContent=o.value},n.onerror=e=>{console.error("Ошибка при обновлении баланса",e)}}const c=document.getElementById("click-button");c.addEventListener("click",e=>{a(1);const t=document.createElement("span");t.textContent="+1",t.classList.add("click-effect");const n=e.target.getBoundingClientRect();t.style.left=`${e.clientX-n.left}px`,t.style.top=`${e.clientY-n.top}px`,e.target.appendChild(t),setTimeout(()=>{t.remove()},1e3)});const r=document.querySelectorAll(".nav-button"),l=document.querySelectorAll(".page");r.forEach(e=>{e.addEventListener("click",()=>{document.querySelector(".nav-button.active").classList.remove("active"),e.classList.add("active");const t=e.getAttribute("data-target");l.forEach(e=>{e.id===t?(e.style.display="flex",setTimeout(()=>{e.classList.add("active")},10)):(e.classList.remove("active"),setTimeout(()=>{e.style.display="none"},300))})})})});
